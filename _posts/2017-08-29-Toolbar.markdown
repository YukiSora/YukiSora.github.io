---
layout: article
title: "Toolbar"
date: 2017-08-29 14:36:59 +0800
categories: development
---

Toolbar 在 Android 5.0 推出用来代替 ActionBar。

## 基础用法

Toolbar 布局。

{% highlight xml %}
<android.support.v7.widget.Toolbar
    android:id="@+id/toolbar"
    android:layout_width="match_parent"
    android:layout_height="?attr/actionBarSize"
    android:background="?attr/colorPrimary" />
{% endhighlight %}

去掉原本 ActionBar。

{% highlight xml %}
<style
    name="AppTheme"
    parent="Theme.AppCompat.Light.NoActionBar">
</style>
{% endhighlight %}

替换 ActionBar。

{% highlight java %}
Toolbar toolbar = (Toolbar)findViewById(R.id.toolbar);
setSupportActionBar(toolbar);
{% endhighlight %}

---

## Actions

action 菜单项。

{% highlight xml %}
<?xml version="1.0" encoding="utf-8"?>
<menu
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <item
        android:id="@+id/always"
        android:icon="@mipmap/ic_launcher_round"
        android:title="Always"
        app:showAsAction="always" />

    <item
        android:id="@+id/ifRoom"
        android:icon="@mipmap/ic_launcher_round"
        android:title="If Room"
        app:showAsAction="ifRoom" />

    <item android:id="@+id/never"
        android:title="Never"
        app:showAsAction="never" />

</menu>
{% endhighlight %}

关联菜单。

{% highlight java %}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.toolbar_menu, menu);

    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.always:
            return true;
        case R.id.ifRoom:
            return true;
        case R.id.never:
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
}
{% endhighlight %}

菜单响应。

{% highlight java %}
toolbar.setOnMenuItemClickListener(new Toolbar.OnMenuItemClickListener() {
    @Override
    public boolean onMenuItemClick(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.always:
                return true;
            case R.id.ifRoom:
                return true;
            case R.id.never:
                return true;
            default:
                return false;
        }
    }
});
{% endhighlight %}

---

## 其他

设置图标。

{% highlight java %}
toolbar.setLogo(R.mipmap.ic_launcher_round);
{% endhighlight %}

设置标题。

{% highlight java %}
toolbar.setTitle("Title");
{% endhighlight %}

设置副标题。

{% highlight java %}
toolbar.setSubtitle("Subtitle");
{% endhighlight %}

设置导航图标。

{% highlight java %}
toolbar.setNavigationIcon(R.mipmap.ic_launcher_round);
{% endhighlight %}

---
